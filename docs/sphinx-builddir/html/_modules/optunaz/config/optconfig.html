<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>optunaz.config.optconfig &mdash; QSARtuna 3.1.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/autodoc_pydantic.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            QSARtuna
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../README.html">Intro and Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notebooks/preprocess_data.html">Jupyter Notebook: Preprocessing Data for QSARtuna</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notebooks/QSARtuna_Tutorial.html">Jupyter Notebook: QSARtuna CLI Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../algorithms.html">List of available ML algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../descriptors.html">List of available molecular descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../splitters.html">List of available evaluation splits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../transform.html">List of available data transform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../deduplicator.html">List of available deduplicators</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">QSARtuna</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../config.html">optunaz.config</a></li>
      <li class="breadcrumb-item active">optunaz.config.optconfig</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for optunaz.config.optconfig</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">apischema</span> <span class="kn">import</span> <span class="n">schema</span><span class="p">,</span> <span class="n">type_name</span><span class="p">,</span> <span class="n">serialize</span>
<span class="kn">from</span> <span class="nn">apischema.metadata</span> <span class="kn">import</span> <span class="n">none_as_undefined</span><span class="p">,</span> <span class="n">required</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">optunaz.config</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ModelMode</span><span class="p">,</span>
    <span class="n">OptimizationDirection</span><span class="p">,</span>
    <span class="n">Algorithm</span> <span class="k">as</span> <span class="n">GenericAlg</span><span class="p">,</span>
    <span class="n">Visualization</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">optunaz.datareader</span> <span class="kn">import</span> <span class="n">Dataset</span>
<span class="kn">from</span> <span class="nn">optunaz.descriptors</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">MolDescriptor</span><span class="p">,</span>
    <span class="n">ScaledDescriptor</span><span class="p">,</span>
    <span class="n">UnfittedSklearnScaler</span><span class="p">,</span>
    <span class="n">CompositeDescriptor</span><span class="p">,</span>
    <span class="n">ScalingFittingError</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">optunaz.utils</span> <span class="kn">import</span> <span class="n">md5_hash</span>
<span class="kn">from</span> <span class="nn">optunaz.utils.preprocessing.splitter</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AnyCvSplitter</span><span class="p">,</span>
    <span class="n">Random</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Memory</span>
<span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">TemporaryDirectory</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="ClassificationScore"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ClassificationScore">[docs]</a><span class="k">class</span> <span class="nc">ClassificationScore</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="n">ACCURACY</span> <span class="o">=</span> <span class="s2">&quot;accuracy&quot;</span>
    <span class="n">AVERAGE_PRECISION</span> <span class="o">=</span> <span class="s2">&quot;average_precision&quot;</span>
    <span class="n">AUC_PR_CAL</span> <span class="o">=</span> <span class="s2">&quot;auc_pr_cal&quot;</span>
    <span class="n">BALANCED_ACCURACY</span> <span class="o">=</span> <span class="s2">&quot;balanced_accuracy&quot;</span>
    <span class="n">BEDROC</span> <span class="o">=</span> <span class="s2">&quot;bedroc_score&quot;</span>
    <span class="n">CONCORDANCE_INDEX</span> <span class="o">=</span> <span class="s2">&quot;concordance_index&quot;</span>
    <span class="n">F1</span> <span class="o">=</span> <span class="s2">&quot;f1&quot;</span>
    <span class="n">F1_MACRO</span> <span class="o">=</span> <span class="s2">&quot;f1_macro&quot;</span>
    <span class="n">F1_MICRO</span> <span class="o">=</span> <span class="s2">&quot;f1_micro&quot;</span>
    <span class="n">F1_WEIGHTED</span> <span class="o">=</span> <span class="s2">&quot;f1_weighted&quot;</span>
    <span class="n">JACCARD</span> <span class="o">=</span> <span class="s2">&quot;jaccard&quot;</span>
    <span class="n">JACCARD_MACRO</span> <span class="o">=</span> <span class="s2">&quot;jaccard_macro&quot;</span>
    <span class="n">JACCARD_MICRO</span> <span class="o">=</span> <span class="s2">&quot;jaccard_micro&quot;</span>
    <span class="n">JACCARD_WEIGHTED</span> <span class="o">=</span> <span class="s2">&quot;jaccard_weighted&quot;</span>
    <span class="n">NEG_BRIER_SCORE</span> <span class="o">=</span> <span class="s2">&quot;neg_brier_score&quot;</span>
    <span class="n">PRECISION</span> <span class="o">=</span> <span class="s2">&quot;precision&quot;</span>
    <span class="n">PRECISION_MACRO</span> <span class="o">=</span> <span class="s2">&quot;precision_macro&quot;</span>
    <span class="n">PRECISION_MICRO</span> <span class="o">=</span> <span class="s2">&quot;precision_micro&quot;</span>
    <span class="n">PRECISION_WEIGHTED</span> <span class="o">=</span> <span class="s2">&quot;precision_weighted&quot;</span>
    <span class="n">RECALL</span> <span class="o">=</span> <span class="s2">&quot;recall&quot;</span>
    <span class="n">RECALL_MACRO</span> <span class="o">=</span> <span class="s2">&quot;recall_macro&quot;</span>
    <span class="n">RECALL_MICRO</span> <span class="o">=</span> <span class="s2">&quot;recall_micro&quot;</span>
    <span class="n">RECALL_WEIGHTED</span> <span class="o">=</span> <span class="s2">&quot;recall_weighted&quot;</span>
    <span class="n">ROC_AUC</span> <span class="o">=</span> <span class="s2">&quot;roc_auc&quot;</span></div>


<div class="viewcode-block" id="RegressionScore"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RegressionScore">[docs]</a><span class="k">class</span> <span class="nc">RegressionScore</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="n">EXPLAINED_VARIANCE</span> <span class="o">=</span> <span class="s2">&quot;explained_variance&quot;</span>
    <span class="n">MAX_ERROR</span> <span class="o">=</span> <span class="s2">&quot;max_error&quot;</span>
    <span class="n">NEG_MEAN_ABSOLUTE_ERROR</span> <span class="o">=</span> <span class="s2">&quot;neg_mean_absolute_error&quot;</span>
    <span class="n">NEG_MEAN_SQUARED_ERROR</span> <span class="o">=</span> <span class="s2">&quot;neg_mean_squared_error&quot;</span>
    <span class="n">NEG_MEDIAN_ABSOLUTE_ERROR</span> <span class="o">=</span> <span class="s2">&quot;neg_median_absolute_error&quot;</span>
    <span class="n">R2</span> <span class="o">=</span> <span class="s2">&quot;r2&quot;</span></div>


<div class="viewcode-block" id="Algorithm"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Algorithm">[docs]</a><span class="k">class</span> <span class="nc">Algorithm</span><span class="p">(</span><span class="n">GenericAlg</span><span class="p">):</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="AdaBoostClassifier"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.AdaBoostClassifier">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">AdaBoostClassifier</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;AdaBoost Classifier.</span>

<span class="sd">    An AdaBoost classifier is a meta-estimator</span>
<span class="sd">    that begins by fitting a classifier on the original dataset</span>
<span class="sd">    and then fits additional copies of the classifier on the same dataset</span>
<span class="sd">    but where the weights of incorrectly classified instances are adjusted</span>
<span class="sd">    such that subsequent classifiers focus more on difficult cases.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="AdaBoostClassifier.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.AdaBoostClassifier.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;AdaBoostClassifierParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="AdaBoostClassifier.Parameters.AdaBoostClassifierParametersNEstimators"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.AdaBoostClassifier.Parameters.AdaBoostClassifierParametersNEstimators">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">AdaBoostClassifierParametersNEstimators</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="AdaBoostClassifier.Parameters.AdaBoostClassifierParametersLearningRate"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.AdaBoostClassifier.Parameters.AdaBoostClassifierParametersLearningRate">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">AdaBoostClassifierParametersLearningRate</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span></div>

        <span class="n">n_estimators</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">AdaBoostClassifierParametersNEstimators</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;n_estimators&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The maximum number of estimators&quot;</span>
                <span class="s2">&quot; at which boosting is terminated.&quot;</span>
                <span class="s2">&quot; In case of perfect fit, the learning procedure is stopped early.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">AdaBoostClassifierParametersNEstimators</span><span class="p">()</span>

        <span class="n">learning_rate</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">AdaBoostClassifierParametersLearningRate</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;learning_rate&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Weight applied to each classifier&quot;</span>
                <span class="s2">&quot;at each boosting iteration. A higher learning rate&quot;</span>
                <span class="s2">&quot;increases the contribution of each classifier. &quot;</span>
                <span class="s2">&quot;There is a trade-off between the learning_rate&quot;</span>
                <span class="s2">&quot;and n_estimators parameters.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">AdaBoostClassifierParametersLearningRate</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;AdaBoostClassifier&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="Lasso"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Lasso">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Lasso</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Lasso regression.</span>

<span class="sd">    Lasso is a Linear Model trained with L1 prior as regularizer.</span>

<span class="sd">    The Lasso is a linear model that estimates sparse coefficients.</span>
<span class="sd">    It tends to prefer solutions with fewer non-zero coefficients,</span>
<span class="sd">    effectively reducing the number of features</span>
<span class="sd">    upon which the given solution is dependent.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Lasso.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Lasso.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;LassoParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="Lasso.Parameters.LassoParametersAlpha"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Lasso.Parameters.LassoParametersAlpha">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">LassoParametersAlpha</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span></div>

        <span class="n">alpha</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">LassoParametersAlpha</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Alpha&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Constant that multiplies the L1 term,&quot;</span>
                <span class="s2">&quot; controlling regularization strength.&quot;</span>
                <span class="s2">&quot; alpha must be a non-negative float i.e. in [0, inf).&quot;</span>
                <span class="s2">&quot; When alpha = 0, the objective is equivalent to ordinary least squares,&quot;</span>
                <span class="s2">&quot; solved by the LinearRegression object.&quot;</span>
                <span class="s2">&quot; For numerical reasons,&quot;</span>
                <span class="s2">&quot; using alpha = 0 with the Lasso object is not advised.&quot;</span>
                <span class="s2">&quot; Instead, you should use the LinearRegression object.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">LassoParametersAlpha</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;Lasso&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="KNeighborsWeights"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.KNeighborsWeights">[docs]</a><span class="k">class</span> <span class="nc">KNeighborsWeights</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method used to define the weights for a K-Neighbors Classifier&quot;&quot;&quot;</span>

    <span class="n">UNIFORM</span> <span class="o">=</span> <span class="s2">&quot;uniform&quot;</span>
    <span class="s2">&quot;uniform weights. All points in each neighborhood are weighted equally.&quot;</span>
    <span class="n">DISTANCE</span> <span class="o">=</span> <span class="s2">&quot;distance&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;weight points by the inverse of their distance so closer neighbors for a query will have greater \</span>
<span class="sd">     influence than further neighbors&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="KNeighborsMetric"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.KNeighborsMetric">[docs]</a><span class="k">class</span> <span class="nc">KNeighborsMetric</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Metric used to define the weights for a K-Neighbors Classifier&quot;&quot;&quot;</span>

    <span class="n">MINKOWSKI</span> <span class="o">=</span> <span class="s2">&quot;minkowski&quot;</span>
    <span class="n">EUCLIDEAN</span> <span class="o">=</span> <span class="s2">&quot;euclidean&quot;</span>
    <span class="n">MANHATTAN</span> <span class="o">=</span> <span class="s2">&quot;manhattan&quot;</span></div>


<div class="viewcode-block" id="KNeighborsClassifier"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.KNeighborsClassifier">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">KNeighborsClassifier</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;KNeighborsClassifier.</span>

<span class="sd">    Classifier implementing the k-nearest neighbors vote.</span>

<span class="sd">    The principle behind nearest neighbor methods is to find a predefined number of training samples closest in</span>
<span class="sd">    distance to the new point, and predict the label from these. The number of samples is a user-defined constant</span>
<span class="sd">    for k-nearest neighbor learning. Despite its simplicity, nearest neighbors is successful in a large number of</span>
<span class="sd">    classification problems</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="KNeighborsClassifier.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.KNeighborsClassifier.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;KNeighborsClassifierParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="KNeighborsClassifier.Parameters.KNeighborsClassifierParametersN_Neighbors"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.KNeighborsClassifier.Parameters.KNeighborsClassifierParametersN_Neighbors">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">KNeighborsClassifierParametersN_Neighbors</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span></div>

        <span class="n">n_neighbors</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">KNeighborsClassifierParametersN_Neighbors</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;N Neighbors&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of neighbors to use by default for kneighbors queries.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">KNeighborsClassifierParametersN_Neighbors</span><span class="p">()</span>
        <span class="n">weights</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">KNeighborsWeights</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Weights&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Weight function used in prediction&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">KNeighborsWeights</span><span class="o">.</span><span class="n">UNIFORM</span><span class="p">])</span>
        <span class="n">metric</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">KNeighborsMetric</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Metric&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Metric to use for distance computation.&quot;</span>
                <span class="s2">&quot;The default of “minkowski” results in the standard Euclidean distance&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">KNeighborsMetric</span><span class="o">.</span><span class="n">MINKOWSKI</span><span class="p">])</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;KNeighborsClassifier&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="KNeighborsRegressor"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.KNeighborsRegressor">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">KNeighborsRegressor</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;KNeighborsRegressor.</span>

<span class="sd">    Regressor implementing the k-nearest neighbors vote.</span>

<span class="sd">    The principle behind nearest neighbor methods is to find a predefined number of training samples closest in</span>
<span class="sd">    distance to the new point, and predict the label from these. The number of samples is a user-defined constant</span>
<span class="sd">    for k-nearest neighbor learning. Despite its simplicity, nearest neighbors is successful in a large number of</span>
<span class="sd">    classification problems</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="KNeighborsRegressor.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.KNeighborsRegressor.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;KNeighborsRegressorParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="KNeighborsRegressor.Parameters.KNeighborsRegressorParametersN_Neighbors"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.KNeighborsRegressor.Parameters.KNeighborsRegressorParametersN_Neighbors">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">KNeighborsRegressorParametersN_Neighbors</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span></div>

        <span class="n">n_neighbors</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">KNeighborsRegressorParametersN_Neighbors</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;N Neighbors&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of neighbors to use by default for kneighbors queries.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">KNeighborsRegressorParametersN_Neighbors</span><span class="p">()</span>
        <span class="n">weights</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">KNeighborsWeights</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Weights&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Weight function used in prediction&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">KNeighborsWeights</span><span class="o">.</span><span class="n">UNIFORM</span><span class="p">])</span>
        <span class="n">metric</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">KNeighborsMetric</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Metric&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Metric to use for distance computation.&quot;</span>
                <span class="s2">&quot;The default of “minkowski” results in the standard Euclidean distance&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">KNeighborsMetric</span><span class="o">.</span><span class="n">MINKOWSKI</span><span class="p">])</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;KNeighborsRegressor&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="LogisticRegression"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.LogisticRegression">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">LogisticRegression</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logistic Regression classifier.</span>

<span class="sd">    Logistic regression, despite its name,</span>
<span class="sd">    is a linear model for classification rather than regression.</span>
<span class="sd">    Logistic regression is also known in the literature as logit regression,</span>
<span class="sd">    maximum-entropy classification (MaxEnt) or the log-linear classifier.</span>
<span class="sd">    In this model,</span>
<span class="sd">    the probabilities describing the possible outcomes of a single trial</span>
<span class="sd">    are modeled using a logistic function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="LogisticRegression.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.LogisticRegression.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;LogisticRegressionParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="LogisticRegression.Parameters.LogisticRegressionParametersParameterC"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.LogisticRegression.Parameters.LogisticRegressionParametersParameterC">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">LogisticRegressionParametersParameterC</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span></div>

        <span class="n">solver</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Solver&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of solvers to try.&quot;</span>
                <span class="s2">&quot; Note ‘sag’ and ‘saga’ fast convergence&quot;</span>
                <span class="s2">&quot; is only guaranteed on features with approximately the same scale.&quot;</span>
                <span class="s2">&quot; You can preprocess the data with a scaler.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;newton-cg&quot;</span><span class="p">,</span> <span class="s2">&quot;lbfgs&quot;</span><span class="p">,</span> <span class="s2">&quot;sag&quot;</span><span class="p">,</span> <span class="s2">&quot;saga&quot;</span><span class="p">])</span>

        <span class="n">C</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">LogisticRegressionParametersParameterC</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Inverse of regularization strength;&quot;</span>
                <span class="s2">&quot; must be a positive float.&quot;</span>
                <span class="s2">&quot; Like in support vector machines,&quot;</span>
                <span class="s2">&quot; smaller values specify stronger regularization.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">LogisticRegressionParametersParameterC</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;LogisticRegression&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="PLSRegression"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PLSRegression">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">PLSRegression</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PLS regression (Cross decomposition using partial least squares).</span>

<span class="sd">    PLS is a form of regularized linear regression</span>
<span class="sd">    where the number of components controls the strength of the regularization.</span>

<span class="sd">    Cross decomposition algorithms</span>
<span class="sd">    find the fundamental relations between two matrices (X and Y).</span>
<span class="sd">    They are latent variable approaches</span>
<span class="sd">    to modeling the covariance structures in these two spaces.</span>
<span class="sd">    They will try to find the multidimensional direction in the X space</span>
<span class="sd">    that explains the maximum multidimensional variance direction in the Y space.</span>
<span class="sd">    In other words,</span>
<span class="sd">    PLS projects both X and Y into a lower-dimensional subspace</span>
<span class="sd">    such that the covariance between transformed(X) and transformed(Y) is maximal.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PLSRegression.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PLSRegression.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;PLSParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="PLSRegression.Parameters.NComponents"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PLSRegression.Parameters.NComponents">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">NComponents</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span></div>

        <span class="n">n_components</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">NComponents</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;n_components&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of components to keep.&quot;</span>
                <span class="s2">&quot; Should be in [1, min(n_samples, n_features, n_targets)].&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">NComponents</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;PLSRegression&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="RandomForestMaxFeatures"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestMaxFeatures">[docs]</a><span class="k">class</span> <span class="nc">RandomForestMaxFeatures</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method used to define the maximum number of features in a Random Forest&quot;&quot;&quot;</span>

    <span class="n">AUTO</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>
    <span class="s2">&quot;Auto sets `max_features=sqrt(n_features)`.&quot;</span>
    <span class="n">SQRT</span> <span class="o">=</span> <span class="s2">&quot;sqrt&quot;</span>
    <span class="s2">&quot;Square root sets `max_features=sqrt(n_features)`.&quot;</span>
    <span class="n">LOG2</span> <span class="o">=</span> <span class="s2">&quot;log2&quot;</span>
    <span class="s2">&quot;Log2 sets `max_features=log2(n_features)`.&quot;</span></div>


<div class="viewcode-block" id="RandomForestClassifier"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestClassifier">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">RandomForestClassifier</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Random Forest classifier.</span>

<span class="sd">    A random forest is a meta estimator</span>
<span class="sd">    that fits a number of decision tree classifiers</span>
<span class="sd">    on various sub-samples of the dataset</span>
<span class="sd">    and uses averaging</span>
<span class="sd">    to improve the predictive accuracy</span>
<span class="sd">    and control over-fitting.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="RandomForestClassifier.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestClassifier.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;RandomForestClassifierParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="RandomForestClassifier.Parameters.RandomForestClassifierParametersMaxDepth"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestClassifier.Parameters.RandomForestClassifierParametersMaxDepth">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">RandomForestClassifierParametersMaxDepth</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="RandomForestClassifier.Parameters.RandomForestClassifierParametersNEstimators"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestClassifier.Parameters.RandomForestClassifierParametersNEstimators">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">RandomForestClassifierParametersNEstimators</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

        <span class="n">max_depth</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">RandomForestClassifierParametersMaxDepth</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_depth&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The maximum depth of the tree.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">RandomForestClassifierParametersMaxDepth</span><span class="p">()</span>

        <span class="n">n_estimators</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">RandomForestClassifierParametersNEstimators</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;n_estimators&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of trees in the forest.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">RandomForestClassifierParametersNEstimators</span><span class="p">()</span>

        <span class="n">max_features</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">RandomForestMaxFeatures</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_features&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of features to consider&quot;</span>
                <span class="s2">&quot;when looking for the best split:  If auto, then&quot;</span>
                <span class="s2">&quot;consider max_features features at each split.&quot;</span>
                <span class="s2">&quot; - If “auto”, then `max_features=n_features`.&quot;</span>
                <span class="s2">&quot; - If “sqrt”, then `max_features=sqrt(n_features)`.&quot;</span>
                <span class="s2">&quot; - If “log2”, then `max_features=log2(n_features)`.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">RandomForestMaxFeatures</span><span class="o">.</span><span class="n">AUTO</span><span class="p">])</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RandomForestClassifier&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="RandomForestRegressor"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestRegressor">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">RandomForestRegressor</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Random Forest regression.</span>

<span class="sd">    A random forest is a meta estimator</span>
<span class="sd">    that fits a number of classifying decision trees</span>
<span class="sd">    on various sub-samples of the dataset</span>
<span class="sd">    and uses averaging</span>
<span class="sd">    to improve the predictive accuracy</span>
<span class="sd">    and control over-fitting.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="RandomForestRegressor.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestRegressor.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;RandomForestRegressorParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="RandomForestRegressor.Parameters.RandomForestRegressorParametersMaxDepth"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestRegressor.Parameters.RandomForestRegressorParametersMaxDepth">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">RandomForestRegressorParametersMaxDepth</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="RandomForestRegressor.Parameters.RandomForestRegressorParametersNEstimators"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.RandomForestRegressor.Parameters.RandomForestRegressorParametersNEstimators">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">RandomForestRegressorParametersNEstimators</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

        <span class="n">max_depth</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">RandomForestRegressorParametersMaxDepth</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_depth&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The maximum depth of the tree.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">RandomForestRegressorParametersMaxDepth</span><span class="p">()</span>

        <span class="n">n_estimators</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">RandomForestRegressorParametersNEstimators</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;n_estimators&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of trees in the forest.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">RandomForestRegressorParametersNEstimators</span><span class="p">()</span>

        <span class="n">max_features</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">RandomForestMaxFeatures</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_features&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of features to consider&quot;</span>
                <span class="s2">&quot;when looking for the best split:  If auto, then&quot;</span>
                <span class="s2">&quot;consider max_features features at each split.&quot;</span>
                <span class="s2">&quot; - If “auto”, then `max_features=n_features`.&quot;</span>
                <span class="s2">&quot; - If “sqrt”, then `max_features=sqrt(n_features)`.&quot;</span>
                <span class="s2">&quot; - If “log2”, then `max_features=log2(n_features)`.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">RandomForestMaxFeatures</span><span class="o">.</span><span class="n">AUTO</span><span class="p">])</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RandomForestRegressor&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="Ridge"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Ridge">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Ridge</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ridge Regression (Linear least squares with l2 regularization).</span>

<span class="sd">    This model solves a regression model</span>
<span class="sd">    where the loss function is the linear least squares function</span>
<span class="sd">    and regularization is given by the l2-norm.</span>
<span class="sd">    Also known as Ridge Regression or Tikhonov regularization.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Ridge.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Ridge.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;RidgeParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="Ridge.Parameters.Alpha"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Ridge.Parameters.Alpha">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;RidgeParamsAlpha&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">Alpha</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.0</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.0</span><span class="p">))</span></div>

        <span class="n">alpha</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">Alpha</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;alpha&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Constant that multiplies the L2 term, controlling regularization strength&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">Alpha</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;Ridge&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="SVC"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.SVC">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">SVC</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;SVC classifier (C-Support Vector Classification).</span>

<span class="sd">    The implementation is based on libsvm.</span>
<span class="sd">    The fit time scales at least quadratically with the number of samples</span>
<span class="sd">    and may be impractical beyond tens of thousands of samples.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SVC.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.SVC.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;SVCParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="SVC.Parameters.SVCParametersParameterC"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.SVC.Parameters.SVCParametersParameterC">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">SVCParametersParameterC</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">1e-30</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1e02</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">max</span><span class="o">=</span><span class="mf">1e10</span><span class="p">))</span></div>

<div class="viewcode-block" id="SVC.Parameters.Gamma"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.SVC.Parameters.Gamma">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">Gamma</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">1e-9</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">max</span><span class="o">=</span><span class="mf">1e3</span><span class="p">))</span></div>

        <span class="n">C</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">SVCParametersParameterC</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Regularization parameter.&quot;</span>
                <span class="s2">&quot; The strength of the regularization is inversely proportional to C.&quot;</span>
                <span class="s2">&quot; Must be strictly positive.&quot;</span>
                <span class="s2">&quot; The penalty is a squared l2 penalty.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">SVCParametersParameterC</span><span class="p">()</span>

        <span class="n">gamma</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">Gamma</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Kernel coefficient&quot;</span><span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">Gamma</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;SVC&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="SVR"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.SVR">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">SVR</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;SVR regression (Epsilon-Support Vector Regression).</span>

<span class="sd">    The implementation is based on libsvm.</span>
<span class="sd">    The fit time complexity is more than quadratic with the number of samples</span>
<span class="sd">    which makes it hard to scale to datasets with more than a couple of 10000 samples.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SVR.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.SVR.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;SVRParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="SVR.Parameters.SVRParametersParameterC"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.SVR.Parameters.SVRParametersParameterC">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">SVRParametersParameterC</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">1e-30</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1e02</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">max</span><span class="o">=</span><span class="mf">1e10</span><span class="p">))</span></div>

<div class="viewcode-block" id="SVR.Parameters.SVRParametersGamma"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.SVR.Parameters.SVRParametersGamma">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">SVRParametersGamma</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">1e-9</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">max</span><span class="o">=</span><span class="mf">1e3</span><span class="p">))</span></div>

        <span class="n">C</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">SVRParametersParameterC</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Regularization parameter.&quot;</span>
                <span class="s2">&quot; The strength of the regularization is inversely proportional to C.&quot;</span>
                <span class="s2">&quot; Must be strictly positive.&quot;</span>
                <span class="s2">&quot; The penalty is a squared l2 penalty.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">SVRParametersParameterC</span><span class="p">()</span>

        <span class="n">gamma</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">SVRParametersGamma</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Kernel coefficient&quot;</span><span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">SVRParametersGamma</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;SVR&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="XGBRegressor"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.XGBRegressor">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">XGBRegressor</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;XGBoost regression (gradient boosting trees algorithm).</span>

<span class="sd">    XGBoost stands for “Extreme Gradient Boosting”,</span>
<span class="sd">    where the term “Gradient Boosting” originates from the paper</span>
<span class="sd">    Greedy Function Approximation: A Gradient Boosting Machine, by Friedman.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="XGBRegressor.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.XGBRegressor.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;XGBregressorParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="XGBRegressor.Parameters.MaxDepth"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.XGBRegressor.Parameters.MaxDepth">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">MaxDepth</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="XGBRegressor.Parameters.NEstimators"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.XGBRegressor.Parameters.NEstimators">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">NEstimators</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="XGBRegressor.Parameters.LearningRate"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.XGBRegressor.Parameters.LearningRate">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">LearningRate</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.001</span><span class="p">))</span></div>

        <span class="n">max_depth</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">MaxDepth</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_depth&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Maximum tree depth for base learners.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">MaxDepth</span><span class="p">()</span>

        <span class="n">n_estimators</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">NEstimators</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;n_estimators&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of gradient boosted trees.&quot;</span>
                <span class="s2">&quot;Equivalent to number of boosting rounds.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">NEstimators</span><span class="p">()</span>

        <span class="n">learning_rate</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">LearningRate</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;learning_rate&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Weight applied to each classifier&quot;</span>
                <span class="s2">&quot;at each boosting iteration. A higher learning rate&quot;</span>
                <span class="s2">&quot;increases the contribution of each classifier. &quot;</span>
                <span class="s2">&quot;There is a trade-off between the learning_rate&quot;</span>
                <span class="s2">&quot;and n_estimators parameters.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">LearningRate</span><span class="p">()</span></div>

    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">()</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;XGBRegressor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XGBRegressor&quot;</span></div>


<div class="viewcode-block" id="PRFClassifierMaxFeatures"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PRFClassifierMaxFeatures">[docs]</a><span class="k">class</span> <span class="nc">PRFClassifierMaxFeatures</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Method used to define the maximum number of features in a Probabilistic Random Forest&quot;&quot;&quot;</span>

    <span class="n">AUTO</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>
    <span class="s2">&quot;Auto sets `max_features=sqrt(n_features)`.&quot;</span>
    <span class="n">SQRT</span> <span class="o">=</span> <span class="s2">&quot;sqrt&quot;</span>
    <span class="s2">&quot;Square root sets `max_features=sqrt(n_features)`.&quot;</span>
    <span class="n">LOG2</span> <span class="o">=</span> <span class="s2">&quot;log2&quot;</span>
    <span class="s2">&quot;Log2 sets `max_features=log2(n_features)`.&quot;</span></div>


<div class="viewcode-block" id="PRFClassifier"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PRFClassifier">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">PRFClassifier</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PRF (Probabilistic Random Forest).</span>

<span class="sd">    PRF can be seen as a hybrid between regression and classification algorithms.</span>
<span class="sd">    Similar to regression algorithms,</span>
<span class="sd">    PRF takes as input real-valued probabilities,</span>
<span class="sd">    usually from Probabilistic Threshold Representation (PTR).</span>
<span class="sd">    However, similar to classification algorithms,</span>
<span class="sd">    it predicts probability of belonging to active or inactive class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PRFClassifier.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PRFClassifier.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;PRFClassifierParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="PRFClassifier.Parameters.PRFClassifierParametersNEstimators"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PRFClassifier.Parameters.PRFClassifierParametersNEstimators">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">PRFClassifierParametersNEstimators</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="PRFClassifier.Parameters.PRFClassifierParametersMaxDepth"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PRFClassifier.Parameters.PRFClassifierParametersMaxDepth">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">PRFClassifierParametersMaxDepth</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="PRFClassifier.Parameters.PRFClassifierParametersMinPySumLeaf"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.PRFClassifier.Parameters.PRFClassifierParametersMinPySumLeaf">[docs]</a>        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">PRFClassifierParametersMinPySumLeaf</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

        <span class="n">use_py_gini</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Use pY GINI&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The probability of y is used in GINI when this is True&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">use_py_leafs</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Use pY leafs&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The probability of y is used in leaves when this is True&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">max_depth</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">PRFClassifierParametersMaxDepth</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_depth&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The maximum depth of the tree.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">PRFClassifierParametersMaxDepth</span><span class="p">()</span>

        <span class="n">n_estimators</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">PRFClassifierParametersNEstimators</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;n_estimators&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of trees in the forest.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">PRFClassifierParametersNEstimators</span><span class="p">()</span>

        <span class="n">max_features</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">PRFClassifierMaxFeatures</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_features&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The number of features to consider&quot;</span>
                <span class="s2">&quot;when looking for the best split: &quot;</span>
                <span class="s2">&quot; - If “auto”, then `max_features=sqrt(n_features)`.&quot;</span>
                <span class="s2">&quot; - If “sqrt”, then `max_features=sqrt(n_features)`.&quot;</span>
                <span class="s2">&quot; - If “log2”, then `max_features=log2(n_features)`.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">PRFClassifierMaxFeatures</span><span class="o">.</span><span class="n">AUTO</span><span class="p">])</span>

        <span class="n">min_py_sum_leaf</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">PRFClassifierParametersMinPySumLeaf</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;n_estimators&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;This parameter allows tree pruning when the propagation &quot;</span>
                <span class="s2">&quot;probability is small, thus reducing computation time. &quot;</span>
                <span class="s2">&quot;This value defines the probability threshold, `pth` as&quot;</span>
                <span class="s2">&quot; described in the Selective propagation scheme in the &quot;</span>
                <span class="s2">&quot;original publication `Probabilistic Random Forest: A &quot;</span>
                <span class="s2">&quot;machine learning algorithm for noisy datasets`&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">PRFClassifierParametersMinPySumLeaf</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;PRFClassifier&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="ChemPropActivation"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropActivation">[docs]</a><span class="k">class</span> <span class="nc">ChemPropActivation</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The activation function to use within the network.</span>
<span class="sd">    See https://chemprop.readthedocs.io/en/latest/args.html#chemprop.args.TrainArgs.activation for details</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">RELU</span> <span class="o">=</span> <span class="s2">&quot;ReLU&quot;</span>
    <span class="n">TANH</span> <span class="o">=</span> <span class="s2">&quot;tanh&quot;</span>
    <span class="n">LEAKYRELU</span> <span class="o">=</span> <span class="s2">&quot;LeakyReLU&quot;</span>
    <span class="n">PRELU</span> <span class="o">=</span> <span class="s2">&quot;PReLU&quot;</span>
    <span class="n">SELU</span> <span class="o">=</span> <span class="s2">&quot;SELU&quot;</span>
    <span class="n">ELU</span> <span class="o">=</span> <span class="s2">&quot;ELU&quot;</span></div>


<div class="viewcode-block" id="ChemPropFeatures_Generator"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropFeatures_Generator">[docs]</a><span class="k">class</span> <span class="nc">ChemPropFeatures_Generator</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Features generators are used for computing additional molecule-level features that are appended</span>
<span class="sd">    after message passing.</span>
<span class="sd">    See https://chemprop.readthedocs.io/en/latest/features.html#features-generators for details.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">NONE</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
    <span class="s2">&quot;Turns off the features generator function.&quot;</span>
    <span class="n">MORGAN</span> <span class="o">=</span> <span class="s2">&quot;morgan&quot;</span>
    <span class="s2">&quot;Generates a binary Morgan fingerprint for a molecule.&quot;</span>
    <span class="n">MORGAN_COUNT</span> <span class="o">=</span> <span class="s2">&quot;morgan_count&quot;</span>
    <span class="s2">&quot;Generates a counts-based Morgan fingerprint for a molecule.&quot;</span>
    <span class="n">RDKIT_2D</span> <span class="o">=</span> <span class="s2">&quot;rdkit_2d&quot;</span>
    <span class="s2">&quot;Generates RDKit 2D features for a molecule.&quot;</span>
    <span class="n">RDKIT_2D_NORMALIZED</span> <span class="o">=</span> <span class="s2">&quot;rdkit_2d_normalized&quot;</span>
    <span class="s2">&quot;Generates RDKit 2D normalized features for a molecule.&quot;</span></div>


<div class="viewcode-block" id="ChemPropAggregation"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropAggregation">[docs]</a><span class="k">class</span> <span class="nc">ChemPropAggregation</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Atom-level representations from the MPNN&quot;&quot;&quot;</span>

    <span class="n">MEAN</span> <span class="o">=</span> <span class="s2">&quot;mean&quot;</span>
    <span class="s2">&quot;Representations averaged over all atoms of a molecule&quot;</span>
    <span class="n">SUM</span> <span class="o">=</span> <span class="s2">&quot;sum&quot;</span>
    <span class="s2">&quot;Representations summed over all atoms of a molecule&quot;</span>
    <span class="n">NORM</span> <span class="o">=</span> <span class="s2">&quot;norm&quot;</span>
    <span class="s2">&quot;Representations summed up and divided by a constant (default=100)&quot;</span></div>


<div class="viewcode-block" id="ChemPropClassifier"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ChemPropClassifier</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Chemprop Classifier without hyperopt</span>

<span class="sd">    Chemprop is an open-source package for training deep learning models for molecular property prediction. ChemProp</span>
<span class="sd">    trains two networks; a Directed Message Passing Neural Network (D-MPNN) to encode a graph representation of</span>
<span class="sd">    molecules, and a Feed Forward Neural Network (FFNN); a standard multi-layer perceptron trained to predict the</span>
<span class="sd">    target property using D-MPNN encoding. It was first presented in the paper &quot;Analyzing Learned Molecular</span>
<span class="sd">    Representations for Property Prediction&quot;.  This implementation will use Optuna to optimse parameters instead of</span>
<span class="sd">    Hyperopt (as in the original implementation of ChemProp).</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ChemPropClassifier.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersAggregation_Norm"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersAggregation_Norm">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierAggregation_Norm&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersAggregation_Norm</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersBatch_Size"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersBatch_Size">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierBatch_Size&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersBatch_Size</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersDepth"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersDepth">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierDepth&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersDepth</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersDropout"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersDropout">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierDropout&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersDropout</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.04</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersFFN_Hidden_Size"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersFFN_Hidden_Size">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierFFN_Hidden_Size&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersFFN_Hidden_Size</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2400</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">100</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersFFN_Num_Layers"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersFFN_Num_Layers">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierFFN_Num_Layers&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersFFN_Num_Layers</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersFinal_Lr_Ratio_Exp"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersFinal_Lr_Ratio_Exp">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierFinal_Lr_Ratio_Exp&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersFinal_Lr_Ratio_Exp</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersHidden_Size"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersHidden_Size">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierHidden_Size&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersHidden_Size</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2400</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">100</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersInit_Lr_Ratio_Exp"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersInit_Lr_Ratio_Exp">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierInit_Lr_Ratio_Exp&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersInit_Lr_Ratio_Exp</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersMax_Lr_Exp"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersMax_Lr_Exp">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierMax_Lr_Exp&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersMax_Lr_Exp</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">6</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">6</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">6</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropClassifier.Parameters.ChemPropParametersWarmup_Epochs_Ratio"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropClassifier.Parameters.ChemPropParametersWarmup_Epochs_Ratio">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropClassifierWarmup_Epochs_Ratio&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersWarmup_Epochs_Ratio</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span></div>

        <span class="n">ensemble_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ensemble size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of ensembles with different weight initialisation (provides uncertainty)&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">epochs</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Epochs&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of epochs to run (increasing this will increase run time)&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

        <span class="n">activation</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropActivation</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;activation&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Activation function applied to the &quot;</span>
                <span class="s2">&quot;output of the weighted sum of inputs&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropActivation</span><span class="o">.</span><span class="n">RELU</span><span class="p">])</span>

        <span class="n">aggregation</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropAggregation</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;aggregation&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Aggregation scheme for atomic vectors into molecular vectors.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropAggregation</span><span class="o">.</span><span class="n">MEAN</span><span class="p">])</span>

        <span class="n">aggregation_norm</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersAggregation_Norm</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;aggregation_norm&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;For norm aggregation, number by which to divide summed up atomic features.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersAggregation_Norm</span><span class="p">()</span>

        <span class="n">batch_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersBatch_Size</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;batch_size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;How many samples per batch to load.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersBatch_Size</span><span class="p">()</span>

        <span class="n">depth</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersDepth</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of message passing steps&quot;</span>
                <span class="s2">&quot;(distance of neighboring atoms visible when modelling).&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersDepth</span><span class="p">()</span>

        <span class="n">dropout</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersDropout</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;dropout&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dropout probability. During training, randomly zeroes&quot;</span>
                <span class="s2">&quot; some of the elements of the input tensor with probability `p`&quot;</span>
                <span class="s2">&quot; using samples from a Bernoulli distribution. Each channel will&quot;</span>
                <span class="s2">&quot; be zeroed out independently on every forward call.  This has&quot;</span>
                <span class="s2">&quot; proven to be an effective technique for regularization and &quot;</span>
                <span class="s2">&quot;preventing the co-adaptation of neurons&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersDropout</span><span class="p">()</span>

        <span class="n">features_generator</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropFeatures_Generator</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;features_generator&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Method of generating additional features.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropFeatures_Generator</span><span class="o">.</span><span class="n">NONE</span><span class="p">])</span>

        <span class="n">ffn_hidden_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersFFN_Hidden_Size</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ffn_hidden_size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dimensionality of hidden layers in the FFN.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersFFN_Hidden_Size</span><span class="p">()</span>

        <span class="n">ffn_num_layers</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersFFN_Num_Layers</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ffn_num_layers&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of layers in the FFN after D-MPNN encoding.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersFFN_Num_Layers</span><span class="p">()</span>

        <span class="n">final_lr_ratio_exp</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersFinal_Lr_Ratio_Exp</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;final_lr_ratio_exp&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The exponential for the final learning rate.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersFinal_Lr_Ratio_Exp</span><span class="p">()</span>

        <span class="n">hidden_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersHidden_Size</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;hidden_size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Size of the hidden bond message vectors in the D-MPNN&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersHidden_Size</span><span class="p">()</span>

        <span class="n">init_lr_ratio_exp</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersInit_Lr_Ratio_Exp</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;init_lr_ratio_exp&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The exponential for the learning rate ratio.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersInit_Lr_Ratio_Exp</span><span class="p">()</span>

        <span class="n">max_lr_exp</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersMax_Lr_Exp</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_lr_exp&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The exponential for the maximum learning rate.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersMax_Lr_Exp</span><span class="p">()</span>

        <span class="n">warmup_epochs_ratio</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersWarmup_Epochs_Ratio</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;warmup_epochs_ratio&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Ratio for the number of epochs during which &quot;</span>
                <span class="s2">&quot;learning rate increases linearly from init_lr to max_lr.&quot;</span>
                <span class="s2">&quot; Afterwards, learning rate decreases exponentially &quot;</span>
                <span class="s2">&quot;from max_lr to final_lr.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersWarmup_Epochs_Ratio</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;ChemPropClassifier&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="ChemPropRegressor"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ChemPropRegressor</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Chemprop Regressor</span>

<span class="sd">    Chemprop is an open-source package for training deep learning models for molecular property prediction. ChemProp</span>
<span class="sd">    trains two networks; a Directed Message Passing Neural Network (D-MPNN) to encode a graph representation of</span>
<span class="sd">    molecules, and a Feed Forward Neural Network (FFNN); a standard multi-layer perceptron trained to predict the</span>
<span class="sd">    target property using D-MPNN encoding. It was first presented in the paper &quot;Analyzing Learned Molecular</span>
<span class="sd">    Representations for Property Prediction&quot;.  This implementation will use Optuna to optimse parameters instead of</span>
<span class="sd">    Hyperopt (as in the original implementation of ChemProp).</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ChemPropRegressor.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersAggregation_Norm"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersAggregation_Norm">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorAggregation_Norm&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersAggregation_Norm</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersBatch_Size"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersBatch_Size">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorBatch_Size&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersBatch_Size</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersDepth"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersDepth">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorDepth&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersDepth</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersDropout"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersDropout">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorDropout&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersDropout</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.04</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.04</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersFFN_Hidden_Size"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersFFN_Hidden_Size">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorFFN_Hidden_Size&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersFFN_Hidden_Size</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2400</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">100</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersFFN_Num_Layers"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersFFN_Num_Layers">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorFFN_Num_Layers&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersFFN_Num_Layers</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersFinal_Lr_Ratio_Exp"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersFinal_Lr_Ratio_Exp">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorFinal_Lr_Ratio_Exp&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersFinal_Lr_Ratio_Exp</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersHidden_Size"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersHidden_Size">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorHidden_Size&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersHidden_Size</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2400</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">100</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersInit_Lr_Ratio_Exp"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersInit_Lr_Ratio_Exp">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorInit_Lr_Ratio_Exp&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersInit_Lr_Ratio_Exp</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">4</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersMax_Lr_Exp"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersMax_Lr_Exp">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorMax_Lr_Exp&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersMax_Lr_Exp</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">6</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">6</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">2</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mi">6</span><span class="p">))</span></div>

<div class="viewcode-block" id="ChemPropRegressor.Parameters.ChemPropParametersWarmup_Epochs_Ratio"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressor.Parameters.ChemPropParametersWarmup_Epochs_Ratio">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorWarmup_Epochs_Ratio&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersWarmup_Epochs_Ratio</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span></div>

        <span class="n">ensemble_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ensemble size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of ensembles with different weight initialisation (provides uncertainty)&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">epochs</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Epochs&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of epochs to run (increasing this will increase run time)&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

        <span class="n">activation</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropActivation</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;activation&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Activation function applied to the &quot;</span>
                <span class="s2">&quot;output of the weighted sum of inputs&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropActivation</span><span class="o">.</span><span class="n">RELU</span><span class="p">])</span>

        <span class="n">aggregation</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropAggregation</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;aggregation&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Aggregation scheme for atomic vectors into molecular vectors.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropAggregation</span><span class="o">.</span><span class="n">MEAN</span><span class="p">])</span>

        <span class="n">aggregation_norm</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersAggregation_Norm</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;aggregation_norm&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;For norm aggregation, number by which to divide summed up atomic features.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersAggregation_Norm</span><span class="p">()</span>

        <span class="n">batch_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersBatch_Size</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;batch_size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;How many samples per batch to load.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersBatch_Size</span><span class="p">()</span>

        <span class="n">depth</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersDepth</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of message passing steps&quot;</span>
                <span class="s2">&quot;(distance of neighboring atoms visible when modelling).&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersDepth</span><span class="p">()</span>

        <span class="n">dropout</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersDropout</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;dropout&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dropout probability. During training, randomly zeroes&quot;</span>
                <span class="s2">&quot; some of the elements of the input tensor with probability `p`&quot;</span>
                <span class="s2">&quot; using samples from a Bernoulli distribution. Each channel will&quot;</span>
                <span class="s2">&quot; be zeroed out independently on every forward call.  This has&quot;</span>
                <span class="s2">&quot; proven to be an effective technique for regularization and &quot;</span>
                <span class="s2">&quot;preventing the co-adaptation of neurons&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersDropout</span><span class="p">()</span>

        <span class="n">features_generator</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropFeatures_Generator</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;features_generator&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Method of generating additional features.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropFeatures_Generator</span><span class="o">.</span><span class="n">NONE</span><span class="p">])</span>

        <span class="n">ffn_hidden_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersFFN_Hidden_Size</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ffn_hidden_size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dimensionality of hidden layers in the FFN.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersFFN_Hidden_Size</span><span class="p">()</span>

        <span class="n">ffn_num_layers</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersFFN_Num_Layers</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ffn_num_layers&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of layers in the FFN after D-MPNN encoding.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersFFN_Num_Layers</span><span class="p">()</span>

        <span class="n">final_lr_ratio_exp</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersFinal_Lr_Ratio_Exp</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;final_lr_ratio_exp&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The exponential for the final learning rate.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersFinal_Lr_Ratio_Exp</span><span class="p">()</span>

        <span class="n">hidden_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersHidden_Size</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;hidden_size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Size of the hidden bond message vectors in the D-MPNN&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersHidden_Size</span><span class="p">()</span>

        <span class="n">init_lr_ratio_exp</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersInit_Lr_Ratio_Exp</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;init_lr_ratio_exp&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The exponential for the learning rate ratio.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersInit_Lr_Ratio_Exp</span><span class="p">()</span>

        <span class="n">max_lr_exp</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersMax_Lr_Exp</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;max_lr_exp&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The exponential for the maximum learning rate.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersMax_Lr_Exp</span><span class="p">()</span>

        <span class="n">warmup_epochs_ratio</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersWarmup_Epochs_Ratio</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;warmup_epochs_ratio&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Ratio for the number of epochs during which &quot;</span>
                <span class="s2">&quot;learning rate increases linearly from init_lr to max_lr.&quot;</span>
                <span class="s2">&quot; Afterwards, learning rate decreases exponentially &quot;</span>
                <span class="s2">&quot;from max_lr to final_lr.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersWarmup_Epochs_Ratio</span><span class="p">()</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;ChemPropRegressor&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="ChemPropFrzn"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropFrzn">[docs]</a><span class="k">class</span> <span class="nc">ChemPropFrzn</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `QSARtuna` implements a hyperparameter search space level for ChemProp in order to define Hyperopt search space</span>
<span class="sd">     to optimise. Increasing levels correspond to increasing the search space.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">NONE</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;No weights are frozen&quot;&quot;&quot;</span>
    <span class="n">MPNN</span> <span class="o">=</span> <span class="s2">&quot;mpnn&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Freeze the weights in only the MPNN during transfer learning&quot;&quot;&quot;</span>
    <span class="n">MPNN_FIRST_FFN</span> <span class="o">=</span> <span class="s2">&quot;mpnn_first_ffn&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Freeze the MPNN and first layer of the FFN during transfer learning&quot;&quot;&quot;</span>
    <span class="n">MPNN_LAST_FFN</span> <span class="o">=</span> <span class="s2">&quot;mpnn_last_ffn&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Freeze the MPNN and until the penultimate layer of the FFN during transfer learning&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="ChemPropRegressorPretrained"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressorPretrained">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ChemPropRegressorPretrained</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Chemprop Regressor from a pretrined model</span>

<span class="sd">    Pretraining can be carried out by supplying previously trained QSARtuna ChemProp PKL model.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ChemPropRegressorPretrained.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressorPretrained.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorPretrainedParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
<div class="viewcode-block" id="ChemPropRegressorPretrained.Parameters.ChemPropParametersEpochs"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropRegressorPretrained.Parameters.ChemPropParametersEpochs">[docs]</a>        <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropRegressorPretrainedEpochs&quot;</span><span class="p">)</span>
        <span class="nd">@dataclass</span>
        <span class="k">class</span> <span class="nc">ChemPropParametersEpochs</span><span class="p">:</span>
            <span class="n">low</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">high</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">300</span><span class="p">))</span>
            <span class="n">q</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

        <span class="n">epochs</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">ChemPropParametersEpochs</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;epochs&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of epochs to fine-tune the pretrained model on new data&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">ChemPropParametersEpochs</span><span class="p">()</span>

        <span class="n">frzn</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropFrzn</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Frozen layers&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Decide which layers of the MPNN or FFN to freeze during transfer learning.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropFrzn</span><span class="o">.</span><span class="n">NONE</span><span class="p">])</span>

        <span class="n">pretrained_model</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Pretrained Model&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Path to a pretrained QSARtuna pkl model&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;ChemPropRegressorPretrained&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="ChemPropSearch_Parameter_Level"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropSearch_Parameter_Level">[docs]</a><span class="k">class</span> <span class="nc">ChemPropSearch_Parameter_Level</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `QSARtuna` implements a hyperparameter search space level for ChemProp in order to define Hyperopt search space</span>
<span class="sd">     to optimise. Increasing levels correspond to increasing the search space.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">AUTO</span> <span class="o">=</span> <span class="s2">&quot;auto&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Alter the space depending on training data, i.e training set size, no. of hyperparameter trial configurations </span>
<span class="sd">    (`num_iters`) &amp; no. epochs. This ensures search spaces are not too large for limited data/epochs, </span>
<span class="sd">    and `vice-versa`, an extensive search space is trailed when applicable.&quot;&quot;&quot;</span>
    <span class="n">L1</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search only the `basic` set of hyperparameters: `depth`, `ffn_num_layers`, `dropout`, and</span>
<span class="sd">     `linked_hidden_size`.&quot;&quot;&quot;</span>
    <span class="n">L2</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search `basic` and `linked_hidden_size` (search `hidden_size` and `ffn_hidden_size` constrained to have the</span>
<span class="sd">     same value.&quot;&quot;&quot;</span>
    <span class="n">L3</span> <span class="o">=</span> <span class="s2">&quot;3&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search for `basic`, &quot;hidden_size&quot;, &quot;ffn_hidden_size` and `learning_rate` (which uses `max_lr_exp`, `init_lr_exp`,</span>
<span class="sd">     `final_lr_exp`, and `warmup_epochs` parameters).&quot;&quot;&quot;</span>
    <span class="n">L4</span> <span class="o">=</span> <span class="s2">&quot;4&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search for `basic`, `hidden_size`, `ffn_hidden_size` (hidden sizes now independent) and `learning_rate`.&quot;&quot;&quot;</span>
    <span class="n">L5</span> <span class="o">=</span> <span class="s2">&quot;5&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search for `basic`, `hidden_size`, `ffn_hidden_size`, `learning_rate` and `activation`.&quot;&quot;&quot;</span>
    <span class="n">L6</span> <span class="o">=</span> <span class="s2">&quot;6&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search for `basic`, `hidden_size`, `ffn_hidden_size`, `learning_rate`, `activation` and `batch_size`.&quot;&quot;&quot;</span>
    <span class="n">L7</span> <span class="o">=</span> <span class="s2">&quot;7&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search for `basic`, `hidden_size`, `ffn_hidden_size`, `learning_rate`, `activation`, `batch_size` and</span>
<span class="sd">    `aggregation_norm`.&quot;&quot;&quot;</span>
    <span class="n">L8</span> <span class="o">=</span> <span class="s2">&quot;8&quot;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Search all possible `network` hyper-parameters&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="ChemPropHyperoptClassifier"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropHyperoptClassifier">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ChemPropHyperoptClassifier</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Chemprop classifier</span>

<span class="sd">    Chemprop is an open-source package for training deep learning models for molecular property prediction. ChemProp</span>
<span class="sd">    trains two networks; a Directed Message Passing Neural Network (D-MPNN) to encode a graph representation of</span>
<span class="sd">    molecules, and a Feed Forward Neural Network (FFNN); a standard multi-layer perceptron trained to predict the</span>
<span class="sd">    target property using D-MPNN encoding. It was first presented in the paper &quot;Analyzing Learned Molecular</span>
<span class="sd">    Representations for Property Prediction&quot;.  This implementation will use Hyperopt to optimse `network` parameters</span>
<span class="sd">    within each trial, allowing for Optuna to trial more complex hyperparameters, such as feature generation</span>
<span class="sd">    and side information weighting. NB: This implementation can also be used to implement quick/simple ChemProp models</span>
<span class="sd">    by using sensible defaults from the authors; to do this run ChemProp with Num_Iters=&#39;1&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ChemPropHyperoptClassifier.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropHyperoptClassifier.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropHyperoptClassifierParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
        <span class="n">ensemble_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ensemble size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of ensembles with different weight initialisation (provides uncertainty)&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">epochs</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Epochs&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of epochs to run (increasing this will increase run time)&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

        <span class="n">num_iters</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Number of HyperOpt iterations&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dictates the number (Hyperopt) trials ChemProp will run&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">features_generator</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropFeatures_Generator</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;features_generator&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Method of generating additional features.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropFeatures_Generator</span><span class="o">.</span><span class="n">NONE</span><span class="p">])</span>

        <span class="n">search_parameter_level</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropSearch_Parameter_Level</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;search_parameter_level&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Defines the complexity of the search space used by Hyperopt (larger=more complex).&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropSearch_Parameter_Level</span><span class="o">.</span><span class="n">AUTO</span><span class="p">])</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;ChemPropHyperoptClassifier&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<div class="viewcode-block" id="ChemPropHyperoptRegressor"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropHyperoptRegressor">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ChemPropHyperoptRegressor</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Chemprop regressor</span>

<span class="sd">    Chemprop is an open-source package for training deep learning models for molecular property prediction. ChemProp</span>
<span class="sd">    trains two networks; a Directed Message Passing Neural Network (D-MPNN) to encode a graph representation of</span>
<span class="sd">    molecules, and a Feed Forward Neural Network (FFNN); a standard multi-layer perceptron trained to predict the</span>
<span class="sd">    target property using D-MPNN encoding. It was first presented in the paper &quot;Analyzing Learned Molecular</span>
<span class="sd">    Representations for Property Prediction&quot;.  This implementation will use Hyperopt to optimse `network` parameters</span>
<span class="sd">    within each trial, allowing for Optuna to trial more complex hyperparameters, such as feature generation</span>
<span class="sd">    and side information weighting. NB: This implementation can also be used to implement quick/simple ChemProp models</span>
<span class="sd">    by using sensible defaults from the authors; to do this run ChemProp with Num_Iters=&#39;1&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ChemPropHyperoptRegressor.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.ChemPropHyperoptRegressor.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;ChemPropHyperoptRegressorParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
        <span class="n">ensemble_size</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ensemble size&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of ensembles with different weight initialisation (provides uncertainty)&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">epochs</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Epochs&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of epochs to run (increasing this will increase run time)&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

        <span class="n">num_iters</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Number of HyperOpt iterations&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dictates the number (Hyperopt) trials ChemProp will run&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">features_generator</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropFeatures_Generator</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;features_generator&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Method of generating additional features.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropFeatures_Generator</span><span class="o">.</span><span class="n">NONE</span><span class="p">])</span>

        <span class="n">search_parameter_level</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="n">ChemPropSearch_Parameter_Level</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;search_parameter_level&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Defines the complexity of the search space used by Hyperopt (larger=more complex).&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">ChemPropSearch_Parameter_Level</span><span class="o">.</span><span class="n">AUTO</span><span class="p">])</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;ChemPropHyperoptRegressor&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<span class="n">AnyRegressionAlgorithm</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
    <span class="n">Lasso</span><span class="p">,</span>
    <span class="n">PLSRegression</span><span class="p">,</span>
    <span class="n">RandomForestRegressor</span><span class="p">,</span>
    <span class="n">Ridge</span><span class="p">,</span>
    <span class="n">KNeighborsRegressor</span><span class="p">,</span>
    <span class="n">SVR</span><span class="p">,</span>
    <span class="n">XGBRegressor</span><span class="p">,</span>
    <span class="n">PRFClassifier</span><span class="p">,</span>  <span class="c1"># PRFClassifier ingests/outputs continuous probabilities so should be evaluated as regressor</span>
    <span class="n">ChemPropRegressor</span><span class="p">,</span>
    <span class="n">ChemPropRegressorPretrained</span><span class="p">,</span>
    <span class="n">ChemPropHyperoptRegressor</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">AnyClassificationAlgorithm</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
    <span class="n">AdaBoostClassifier</span><span class="p">,</span>
    <span class="n">KNeighborsClassifier</span><span class="p">,</span>
    <span class="n">LogisticRegression</span><span class="p">,</span>
    <span class="n">RandomForestClassifier</span><span class="p">,</span>
    <span class="n">SVC</span><span class="p">,</span>
    <span class="n">ChemPropClassifier</span><span class="p">,</span>
    <span class="n">ChemPropHyperoptClassifier</span><span class="p">,</span>
<span class="p">]</span>


<div class="viewcode-block" id="CalibratedClassifierCVEnsemble"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.CalibratedClassifierCVEnsemble">[docs]</a><span class="k">class</span> <span class="nc">CalibratedClassifierCVEnsemble</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="n">TRUE</span> <span class="o">=</span> <span class="s2">&quot;True&quot;</span>
    <span class="n">FALSE</span> <span class="o">=</span> <span class="s2">&quot;False&quot;</span></div>


<div class="viewcode-block" id="CalibratedClassifierCVMethod"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.CalibratedClassifierCVMethod">[docs]</a><span class="k">class</span> <span class="nc">CalibratedClassifierCVMethod</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="n">SIGMOID</span> <span class="o">=</span> <span class="s2">&quot;sigmoid&quot;</span>
    <span class="n">ISOTONIC</span> <span class="o">=</span> <span class="s2">&quot;isotonic&quot;</span>
    <span class="n">VENNABERS</span> <span class="o">=</span> <span class="s2">&quot;vennabers&quot;</span></div>


<div class="viewcode-block" id="CalibratedClassifierCVWithVA"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.CalibratedClassifierCVWithVA">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">CalibratedClassifierCVWithVA</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calibrated Classifier.</span>

<span class="sd">    Probability calibration with isotonic regression, logistic regression, or VennABERS.</span>

<span class="sd">    This class uses cross-validation (cv) to both estimate the parameters of a classifier and subsequently calibrate</span>
<span class="sd">    a classifier. With default ensemble=True, for each cv split it fits a copy of the base estimator to the training</span>
<span class="sd">    subset, and calibrates it using the testing subset. For prediction, predicted probabilities are averaged across</span>
<span class="sd">    these individual calibrated classifiers. When ensemble=False, cv is used to obtain unbiased predictions which are</span>
<span class="sd">    then used for calibration. For prediction, the base estimator, trained using all the data, is used. VennABERS</span>
<span class="sd">    offers uncertainty prediction based on p0 vs. p1 discordance.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="CalibratedClassifierCVWithVA.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.CalibratedClassifierCVWithVA.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;CalibratedClassifierCVWithVAParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
        <span class="n">estimator</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">AnyClassificationAlgorithm</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Estimator&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Base estimator to use for calibration&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">AnyClassificationAlgorithm</span>

        <span class="n">ensemble</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="n">CalibratedClassifierCVEnsemble</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ensemble&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether each cv it fits a copy of the base estimator, vs. cv used to obtain unbiased &quot;</span>
                <span class="s2">&quot;predictions used for calibration&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">CalibratedClassifierCVEnsemble</span><span class="o">.</span><span class="n">TRUE</span><span class="p">)</span>

        <span class="n">method</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">Union</span><span class="p">[</span><span class="n">CalibratedClassifierCVMethod</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;method&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Calibration method used to obtained calibrated predictions&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">CalibratedClassifierCVMethod</span><span class="o">.</span><span class="n">ISOTONIC</span><span class="p">)</span>
        <span class="n">n_folds</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Number of Cross validation folds (splits)&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of cv folds to obtain calibration data&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;CalibratedClassifierCVWithVA&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<span class="n">MapieCompatibleAlgorithm</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
    <span class="n">Lasso</span><span class="p">,</span>
    <span class="n">PLSRegression</span><span class="p">,</span>
    <span class="n">RandomForestRegressor</span><span class="p">,</span>
    <span class="n">KNeighborsRegressor</span><span class="p">,</span>
    <span class="n">Ridge</span><span class="p">,</span>
    <span class="n">SVR</span><span class="p">,</span>
    <span class="n">XGBRegressor</span><span class="p">,</span>
    <span class="n">PRFClassifier</span><span class="p">,</span>
<span class="p">]</span>


<div class="viewcode-block" id="Mapie"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Mapie">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Mapie</span><span class="p">(</span><span class="n">Algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mapie</span>

<span class="sd">    MAPIE - Model Agnostic Prediction Interval Estimator</span>

<span class="sd">    MAPIE allows you to estimate prediction intervals for regression models. Prediction intervals output by MAPIE</span>
<span class="sd">    encompass both aleatoric and epistemic uncertainties and are backed by strong theoretical guarantees thanks to</span>
<span class="sd">    conformal prediction methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Mapie.Parameters"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.Mapie.Parameters">[docs]</a>    <span class="nd">@type_name</span><span class="p">(</span><span class="s2">&quot;MapieParams&quot;</span><span class="p">)</span>
    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Parameters</span><span class="p">:</span>
        <span class="n">estimator</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="n">MapieCompatibleAlgorithm</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Estimator&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Base estimator to use&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">MapieCompatibleAlgorithm</span>
        <span class="n">mapie_alpha</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
            <span class="nb">float</span><span class="p">,</span>
            <span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Uncertainty alpha&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Alpha used to generate uncertainty estimates&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;Mapie&quot;</span><span class="p">]</span>
    <span class="n">parameters</span><span class="p">:</span> <span class="n">Parameters</span></div>


<span class="n">AnyAlgorithm</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
    <span class="n">AnyRegressionAlgorithm</span><span class="p">,</span>
    <span class="n">AnyClassificationAlgorithm</span><span class="p">,</span>
    <span class="n">CalibratedClassifierCVWithVA</span><span class="p">,</span>
    <span class="n">Mapie</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">AnyChemPropAlgorithm</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">ChemPropClassifier</span><span class="p">,</span>
    <span class="n">ChemPropHyperoptClassifier</span><span class="p">,</span>
    <span class="n">ChemPropRegressor</span><span class="p">,</span>
    <span class="n">ChemPropRegressorPretrained</span><span class="p">,</span>
    <span class="n">ChemPropHyperoptRegressor</span><span class="p">,</span>
<span class="p">]</span>


<div class="viewcode-block" id="isanyof"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.isanyof">[docs]</a><span class="k">def</span> <span class="nf">isanyof</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">classes</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Type</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">)</span></div>


<div class="viewcode-block" id="detect_mode_from_algs"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.detect_mode_from_algs">[docs]</a><span class="k">def</span> <span class="nf">detect_mode_from_algs</span><span class="p">(</span><span class="n">algs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyAlgorithm</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">ModelMode</span><span class="p">:</span>
    <span class="c1"># Getting algs could be replaced by</span>
    <span class="c1"># TO DO: typing.get_args(AnyRegressionAlgorithm) from Python 3.8.</span>
    <span class="n">regression_algs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Lasso</span><span class="p">,</span>
        <span class="n">PLSRegression</span><span class="p">,</span>
        <span class="n">RandomForestRegressor</span><span class="p">,</span>
        <span class="n">Ridge</span><span class="p">,</span>
        <span class="n">SVR</span><span class="p">,</span>
        <span class="n">XGBRegressor</span><span class="p">,</span>
        <span class="n">ChemPropRegressor</span><span class="p">,</span>
        <span class="n">ChemPropRegressorPretrained</span><span class="p">,</span>
        <span class="n">ChemPropHyperoptRegressor</span><span class="p">,</span>
        <span class="n">PRFClassifier</span><span class="p">,</span>
        <span class="n">Mapie</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">classification_algs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">AdaBoostClassifier</span><span class="p">,</span>
        <span class="n">LogisticRegression</span><span class="p">,</span>
        <span class="n">RandomForestClassifier</span><span class="p">,</span>
        <span class="n">SVC</span><span class="p">,</span>
        <span class="n">ChemPropClassifier</span><span class="p">,</span>
        <span class="n">ChemPropHyperoptClassifier</span><span class="p">,</span>
        <span class="n">CalibratedClassifierCVWithVA</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">isanyof</span><span class="p">(</span><span class="n">alg</span><span class="p">,</span> <span class="n">regression_algs</span><span class="p">)</span> <span class="k">for</span> <span class="n">alg</span> <span class="ow">in</span> <span class="n">algs</span><span class="p">):</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">ModelMode</span><span class="o">.</span><span class="n">REGRESSION</span>
    <span class="k">elif</span> <span class="nb">all</span><span class="p">(</span><span class="n">isanyof</span><span class="p">(</span><span class="n">alg</span><span class="p">,</span> <span class="n">classification_algs</span><span class="p">)</span> <span class="k">for</span> <span class="n">alg</span> <span class="ow">in</span> <span class="n">algs</span><span class="p">):</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">ModelMode</span><span class="o">.</span><span class="n">CLASSIFICATION</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Provided algorithms (</span><span class="si">{</span><span class="n">algs</span><span class="si">}</span><span class="s2">) &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;are neither only regression (</span><span class="si">{</span><span class="n">regression_algs</span><span class="si">}</span><span class="s2">),&quot;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;nor only classification (</span><span class="si">{</span><span class="n">classification_algs</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">mode</span></div>


<div class="viewcode-block" id="copy_path_for_scaled_descriptor"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.copy_path_for_scaled_descriptor">[docs]</a><span class="k">def</span> <span class="nf">copy_path_for_scaled_descriptor</span><span class="p">(</span>
    <span class="n">descriptors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">MolDescriptor</span><span class="p">],</span> <span class="n">dataset</span><span class="p">:</span> <span class="n">Dataset</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Memory</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">recursive_copy_path_for_scaled_descriptor</span><span class="p">(</span><span class="n">d_</span><span class="p">:</span> <span class="n">MolDescriptor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d_</span><span class="p">,</span> <span class="n">ScaledDescriptor</span><span class="p">):</span>
            <span class="n">scaler</span> <span class="o">=</span> <span class="n">d_</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">scaler</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">scaler</span><span class="p">,</span> <span class="n">UnfittedSklearnScaler</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">scaler</span><span class="o">.</span><span class="n">mol_data</span><span class="o">.</span><span class="n">file_path</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="n">d_</span><span class="o">.</span><span class="n">set_unfitted_scaler_data</span><span class="p">(</span>
                    <span class="n">dataset</span><span class="o">.</span><span class="n">training_dataset_file</span><span class="p">,</span> <span class="n">dataset</span><span class="o">.</span><span class="n">input_column</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="n">cache</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d_</span><span class="o">.</span><span class="n">_ensure_scaler_is_fitted</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="n">cache</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d_</span><span class="p">,</span> <span class="n">CompositeDescriptor</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">dd</span> <span class="ow">in</span> <span class="n">d_</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">descriptors</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">recursive_copy_path_for_scaled_descriptor</span><span class="p">(</span><span class="n">dd</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">ScalingFittingError</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dd</span><span class="si">}</span><span class="s2"> failed scaling, will not be used in optimisation&quot;</span>
                    <span class="p">)</span>

    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">descriptors</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">recursive_copy_path_for_scaled_descriptor</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ScalingFittingError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">d</span><span class="si">}</span><span class="s2"> failed scaling, will not be used in optimisation&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="OptimizationConfig"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.OptimizationConfig">[docs]</a><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">OptimizationConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Optimization configuration.</span>

<span class="sd">    This is configuration for hyperparameter optimization.</span>
<span class="sd">    It roughly corresponds to Optuna Study.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="OptimizationConfig.Settings"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.OptimizationConfig.Settings">[docs]</a>    <span class="nd">@dataclass</span>
    <span class="k">class</span> <span class="nc">Settings</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optimization settings.&quot;&quot;&quot;</span>

        <span class="n">mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ModelMode</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Classification or regression.&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">none_as_undefined</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">cross_validation</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Hyperparameter splits&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of cross-validation splits Optuna will use during hyperparameter optimization&quot;</span>
                <span class="s2">&quot; Use &#39;1&#39; to disable cross-validation,&quot;</span>
                <span class="s2">&quot; but note that KFold requires at least two splits/folds.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">cv_split_strategy</span><span class="p">:</span> <span class="n">AnyCvSplitter</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default_factory</span><span class="o">=</span><span class="n">Random</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Hyperparameter split strategy&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Splitting method used by Optuna during hyperparameter optimization&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">shuffle</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Hyperparameter data shuffle&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether or not to shuffle the data for Optuna cross-validation&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">direction</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">OptimizationDirection</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="n">OptimizationDirection</span><span class="o">.</span><span class="n">MAXIMIZATION</span><span class="p">,</span>  <span class="c1"># Defaults: Sklearn - maximize, Optuna - minimize.</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Maximization or minimization&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">none_as_undefined</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">scoring</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RegressionScore</span><span class="p">,</span> <span class="n">ClassificationScore</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Scoring metric&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The scoring metric that Optuna will use to optimise&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">|</span> <span class="n">none_as_undefined</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">minimise_std_dev</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Minimise cross-fold deviation&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether or not to require Optuna to also optimise for low cross-fold standard deviation &quot;</span>
                <span class="s2">&quot;of the primary metric&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">use_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Cache descriptor calculations&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether or not to allow Optuna to cache descriptor generation for latency improvements&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">n_trials</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  <span class="c1"># Zero for no optimization (but run preprocessing).</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Hyperparameter trials&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of Optuna trials for hyperparameter optimization&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">|</span> <span class="n">none_as_undefined</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">n_jobs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Number of parallel jobs, set to &#39;-1&#39; to use as many jobs as CPU cores available&quot;</span>
            <span class="p">)</span>
            <span class="o">|</span> <span class="n">none_as_undefined</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">n_startup_trials</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Number of initial (startup, exploratory) random trials&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Take this number of trials out of total number of trials &quot;</span>
                <span class="s2">&quot;and do random exploratory search, &quot;</span>
                <span class="s2">&quot;without performing selection/optimization. &quot;</span>
                <span class="s2">&quot;Use to not get stuck early on in a local minimum.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">random_seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Seed for reproducibility&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;This seed is used for a random number generator.&quot;</span>
                <span class="s2">&quot; Set to an integer value to get reproducible results.&quot;</span>
                <span class="s2">&quot; Set to None/null/empty to initialize at random.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">|</span> <span class="n">none_as_undefined</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">optuna_storage</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Database URL for Optuna Storage&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Database URL for Optuna Storage.&quot;</span>
                <span class="s2">&quot; Set to None/null to use default in-memory storage.&quot;</span>
                <span class="s2">&quot; Example: &#39;sqlite:///optuna_storage.db&#39; for file-based SQLite3 storage.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">|</span> <span class="n">none_as_undefined</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">track_to_mlflow</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Track to MLFlow&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Set to True to use MLFlow tracking UI,&quot;</span>
                <span class="s2">&quot; set to False to disable MLFlow.&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">tracking_rest_endpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;URL to track Optuna progress using internal format&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">split_chemprop</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Whether or not to split ChemProp into separate Optuna runs&quot;</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">n_chemprop_trials</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Number of ChemProp Optuna runs&quot;</span><span class="p">,</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dictates the number of optimization runs to perform using Optuna. Will only be used if &quot;</span>
                <span class="s2">&quot;ChemProp is supplied as an algorithm &quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span></div>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Name of the optimization job.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Description of the optimization job.&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Dataset</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Input data and preprocessing steps.&quot;</span>
        <span class="p">)</span>
        <span class="o">|</span> <span class="n">none_as_undefined</span>
        <span class="o">|</span> <span class="n">required</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">mode</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ModelMode</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Classification or regression&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">none_as_undefined</span><span class="p">,</span>
    <span class="p">)</span>  <span class="c1"># For GUI compatibility.</span>
    <span class="n">algorithms</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AnyAlgorithm</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Algorithms&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Algorithms to trial during hyperparameter optimization.&quot;</span><span class="p">,</span>
            <span class="n">min_items</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">|</span> <span class="n">none_as_undefined</span>
        <span class="o">|</span> <span class="n">required</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">descriptors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">MolDescriptor</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Descriptors&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Molecular descriptors to trial during hyperparameter optimizations.&quot;</span><span class="p">,</span>
            <span class="n">min_items</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">|</span> <span class="n">none_as_undefined</span>
        <span class="o">|</span> <span class="n">required</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">settings</span><span class="p">:</span> <span class="n">Settings</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">schema</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Settings&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Detailed settings for the optimization job.&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="n">visualization</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Visualization</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">task</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;optimization&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;optimization&quot;</span>

<div class="viewcode-block" id="OptimizationConfig.set_cache"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.OptimizationConfig.set_cache">[docs]</a>    <span class="k">def</span> <span class="nf">set_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the cache for descriptor generation when the number of cores supports this&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_cache&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;cache already set.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cachedir</span> <span class="o">=</span> <span class="n">TemporaryDirectory</span><span class="p">()</span>
            <span class="n">memory</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">(</span><span class="n">cachedir</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">memory</span><span class="o">.</span><span class="n">n_cores</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">n_jobs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="n">memory</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache_dir</span> <span class="o">=</span> <span class="n">cachedir</span></div>

<div class="viewcode-block" id="OptimizationConfig.set_algo_hashes"><a class="viewcode-back" href="../../../optunaz.config.html#optunaz.config.optconfig.OptimizationConfig.set_algo_hashes">[docs]</a>    <span class="k">def</span> <span class="nf">set_algo_hashes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set hashes for the algorithms</span>

<span class="sd">        This facilitates tracking duplicate algorithm types with distinct param setups</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">algorithm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">algorithms</span><span class="p">:</span>
            <span class="n">algorithm</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">md5_hash</span><span class="p">(</span><span class="n">serialize</span><span class="p">(</span><span class="n">algorithm</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">algorithm</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s2">&quot;estimator&quot;</span><span class="p">):</span>
                <span class="n">algorithm</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">estimator</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">md5_hash</span><span class="p">(</span><span class="n">serialize</span><span class="p">(</span><span class="n">algorithm</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Sync &#39;mode&#39; in &quot;root&quot; (for GUI) and in settings.mode (original).</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Value mismatch: mode=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="si">}</span><span class="s2"> settings.mode=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">detect_mode_from_algs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">algorithms</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>

        <span class="c1"># Set the cache at post init if True in settings</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">use_cache</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_cache</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># set cache attributes to None, until an (optional) future call to self.set_cache()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cache_dir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Hash the algorithm options (to allow for trialing duplicate algorithms within one config)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_algo_hashes</span><span class="p">()</span>

        <span class="c1"># Tell scaled descriptor to use the main dataset by default.</span>
        <span class="n">copy_path_for_scaled_descriptor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">descriptors</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">)</span>

        <span class="c1"># Set default scoring.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">scoring</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="n">ModelMode</span><span class="o">.</span><span class="n">REGRESSION</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">scoring</span> <span class="o">=</span> <span class="n">RegressionScore</span><span class="o">.</span><span class="n">NEG_MEAN_SQUARED_ERROR</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="n">ModelMode</span><span class="o">.</span><span class="n">CLASSIFICATION</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">scoring</span> <span class="o">=</span> <span class="n">ClassificationScore</span><span class="o">.</span><span class="n">ROC_AUC</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">scoring</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">scoring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">scoring</span><span class="o">.</span><span class="n">value</span>

        <span class="c1"># Set default response type.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="n">ModelMode</span><span class="o">.</span><span class="n">REGRESSION</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">response_type</span> <span class="o">=</span> <span class="s2">&quot;regression&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="n">ModelMode</span><span class="o">.</span><span class="n">CLASSIFICATION</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">response_type</span> <span class="o">=</span> <span class="s2">&quot;classification&quot;</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, AstraZeneca.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>